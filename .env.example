# ==================== 基础配置 ====================
PORT=8000
DB_DRIVER=sqlite
DB_DSN=/app/data/app.db

# ==================== JWT配置 ====================
# 生产环境如保留下述secret,系统每次启动会随机生成
JWT_SECRET=change_me
JWT_TTL=86400
COOKIE_NAME=auth_token
MFA_ISSUER=LoveWall

# ==================== WebAuthn / Passkey ====================
# RP ID (域名，例如 example.com，需与站点一致)
WEBAUTHN_RP_ID=
# RP Origin (完整 Origin，例如 https://example.com)
WEBAUTHN_ORIGIN=
# RP 名称（浏览器展示用）
WEBAUTHN_RP_NAME=LoveWall

# ==================== 上传配置 ====================
UPLOAD_DIR=/app/data/uploads
UPLOAD_BASE_URL=/uploads
MAX_UPLOAD_MB=5

# ==================== 管理员配置 ====================
# 首次启动时会创建此管理员账户
ADMIN_INIT_USER=admin
ADMIN_INIT_PASS=change_me

# ==================== 限流配置 ====================
RATE_LIMIT_RPS=50000
RATE_LIMIT_BURST=50000

# ==================== 发帖限制 ====================
ACTION_POST_COUNT=1000000
ACTION_POST_WINDOW_SEC=1
QUOTA_POSTS_PER_USER_PER_DAY=100
QUOTA_POSTS_PER_IP_PER_DAY=10000

# ==================== 评论限制 ====================
ACTION_COMMENT_COUNT=3000
ACTION_COMMENT_WINDOW_SEC=1
QUOTA_COMMENTS_PER_USER_PER_HOUR=10000
QUOTA_COMMENTS_PER_IP_PER_HOUR=100000

# ==================== 内容长度限制 ====================
MAX_POST_CHARS=2000
MAX_COMMENT_CHARS=500

# ==================== AI配置（可选）====================
AI_BASE_URL=https://instcopilot-api.com/
AI_API_KEY=your_api_key
AI_MODEL=gpt-5-nano
AI_RATE_RPS=1000
AI_RATE_BURST=1000

# ==================== 验证码配置 ====================
# 验证码类型: click(点击式), rotate(旋转式), random(随机)
# 默认: random (在 click 和 rotate 之间随机选择)
CAPTCHA_TYPE=random

# 如果想固定使用某一种验证码,可按需修改:
# CAPTCHA_TYPE=click    # 仅点击式
# CAPTCHA_TYPE=rotate   # 仅旋转式

# 是否启用验证码 (注册和登录必须完成验证码)
# 默认: true (强制启用)
CAPTCHA_ENABLED=true

# 验证码字符数量范围 (仅 click 模式)
# 图片上随机显示的字符总数, 默认最小4个, 最大6个
CAPTCHA_MIN_CHARS=4
CAPTCHA_MAX_CHARS=6

# 需要验证的字符数量 (仅 click 模式)
# 用户需要依次点击的字符数量, 默认最小2个, 最大4个
CAPTCHA_MIN_VERIFY=2
CAPTCHA_MAX_VERIFY=4

# 验证码有效期 (秒), 超时自动失效
# 默认: 60 秒
CAPTCHA_TTL_SECONDS=60

# 注意:
# - 字体和背景资源已内置, 无需额外文件
# - 验证码验证成功后立即失效, 需重新获取
# - rotate 模式会忽略字符数量等配置

# ==================== Redis和缓存配置 ====================
# 注意：Docker Compose模式下，Redis配置在docker-compose.yml中
# 本地开发模式（不使用Docker Compose）可以在这里配置：
# REDIS_ENABLED=false                 # 关闭Redis，使用内存缓存
# REDIS_ADDR=127.0.0.1:6379          # 或连接本地Redis
# REDIS_PASSWORD=
# REDIS_DB=0
# CACHE_MAX_ENTRIES=2048
# CACHE_USER_TTL_MS=1800000
# CACHE_USER_LIST_TTL_MS=300000
